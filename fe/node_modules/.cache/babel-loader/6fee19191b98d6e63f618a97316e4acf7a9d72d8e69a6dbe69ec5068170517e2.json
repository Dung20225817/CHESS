{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\PycharmProjects\\\\Chess\\\\fe\\\\src\\\\components\\\\Board.tsx\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport Square from \"./Square\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst pieceImages = {\n  P: \"/pieces/wP.png\",\n  p: \"/pieces/bP.png\",\n  R: \"/pieces/wR.png\",\n  r: \"/pieces/bR.png\",\n  N: \"/pieces/wN.png\",\n  n: \"/pieces/bN.png\",\n  B: \"/pieces/wB.png\",\n  b: \"/pieces/bB.png\",\n  Q: \"/pieces/wQ.png\",\n  q: \"/pieces/bQ.png\",\n  K: \"/pieces/wK.png\",\n  k: \"/pieces/bK.png\"\n};\nconst initialBoard = [\"rnbqkbnr\", \"pppppppp\", \"........\", \"........\", \"........\", \"........\", \"PPPPPPPP\", \"RNBQKBNR\"];\n\n// Hàm kiểm tra di chuyển hợp lệ\nfunction isValidMove(piece, r1, c1, r2, c2, board) {\n  const target = board[r2][c2];\n\n  // Không ăn quân cùng màu\n  if (piece === piece.toUpperCase() && target !== \".\" && target === target.toUpperCase()) return false;\n  if (piece === piece.toLowerCase() && target !== \".\" && target === target.toLowerCase()) return false;\n  switch (piece.toLowerCase()) {\n    case \"p\":\n      // Tốt\n      if (piece === \"P\") return c1 === c2 && r2 === r1 - 1 && board[r2][c2] === \".\";else return c1 === c2 && r2 === r1 + 1 && board[r2][c2] === \".\";\n    case \"r\":\n      // Xe\n      if (r1 === r2) {\n        const min = Math.min(c1, c2) + 1;\n        const max = Math.max(c1, c2);\n        for (let c = min; c < max; c++) if (board[r1][c] !== \".\") return false;\n        return true;\n      } else if (c1 === c2) {\n        const min = Math.min(r1, r2) + 1;\n        const max = Math.max(r1, r2);\n        for (let r = min; r < max; r++) if (board[r][c1] !== \".\") return false;\n        return true;\n      }\n      return false;\n    case \"n\":\n      // Mã\n      return Math.abs(r2 - r1) === 2 && Math.abs(c2 - c1) === 1 || Math.abs(r2 - r1) === 1 && Math.abs(c2 - c1) === 2;\n    case \"b\":\n      // Tượng\n      if (Math.abs(r2 - r1) !== Math.abs(c2 - c1)) return false;\n      const dr = r2 > r1 ? 1 : -1;\n      const dc = c2 > c1 ? 1 : -1;\n      let r = r1 + dr,\n        c = c1 + dc;\n      while (r !== r2 && c !== c2) {\n        if (board[r][c] !== \".\") return false;\n        r += dr;\n        c += dc;\n      }\n      return true;\n    case \"q\":\n      // Hậu\n      return isValidMove(piece === \"Q\" ? \"R\" : \"r\", r1, c1, r2, c2, board) || isValidMove(piece === \"Q\" ? \"B\" : \"b\", r1, c1, r2, c2, board);\n    case \"k\":\n      // Vua\n      return Math.abs(r2 - r1) <= 1 && Math.abs(c2 - c1) <= 1;\n    default:\n      return false;\n  }\n}\nconst Board = () => {\n  _s();\n  const [board, setBoard] = useState(initialBoard.map(row => row.split(\"\")));\n  const [selected, setSelected] = useState(null);\n  const handleClick = (r, c) => {\n    if (selected) {\n      const [r1, c1] = selected;\n      const piece = board[r1][c1];\n      if (!piece || piece === \".\") return setSelected(null);\n      if (isValidMove(piece, r1, c1, r, c, board)) {\n        const newBoard = board.map(row => [...row]);\n        newBoard[r1][c1] = \".\";\n        newBoard[r][c] = piece;\n        setBoard(newBoard);\n      }\n      setSelected(null); // bỏ chọn dù di chuyển thành công hay không\n    } else {\n      if (board[r][c] !== \".\") setSelected([r, c]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"grid\",\n      gridTemplateColumns: \"repeat(8, 60px)\",\n      gridTemplateRows: \"repeat(8, 60px)\",\n      border: \"2px solid black\"\n    },\n    children: board.map((row, i) => row.map((piece, j) => {\n      const color = (i + j) % 2 === 0 ? \"#f0d9b5\" : \"#b58863\";\n      const piecePath = pieceImages[piece] || \"\";\n      const isSelected = (selected === null || selected === void 0 ? void 0 : selected[0]) === i && (selected === null || selected === void 0 ? void 0 : selected[1]) === j;\n      return /*#__PURE__*/_jsxDEV(Square, {\n        value: piecePath,\n        isSelected: isSelected,\n        onClick: () => handleClick(i, j),\n        color: color\n      }, `${i}-${j}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this);\n    }))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n};\n_s(Board, \"IjGH+xCc8vySbXw53FUfqx8oZN8=\");\n_c = Board;\nexport default Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["useState","Square","jsxDEV","_jsxDEV","pieceImages","P","p","R","r","N","n","B","b","Q","q","K","k","initialBoard","isValidMove","piece","r1","c1","r2","c2","board","target","toUpperCase","toLowerCase","min","Math","max","c","abs","dr","dc","Board","_s","setBoard","map","row","split","selected","setSelected","handleClick","newBoard","style","display","gridTemplateColumns","gridTemplateRows","border","children","i","j","color","piecePath","isSelected","value","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/PycharmProjects/Chess/fe/src/components/Board.tsx"],"sourcesContent":["import { useState } from \"react\";\nimport Square from \"./Square\";\n\nconst pieceImages: { [key: string]: string } = {\n  P: \"/pieces/wP.png\",\n  p: \"/pieces/bP.png\",\n  R: \"/pieces/wR.png\",\n  r: \"/pieces/bR.png\",\n  N: \"/pieces/wN.png\",\n  n: \"/pieces/bN.png\",\n  B: \"/pieces/wB.png\",\n  b: \"/pieces/bB.png\",\n  Q: \"/pieces/wQ.png\",\n  q: \"/pieces/bQ.png\",\n  K: \"/pieces/wK.png\",\n  k: \"/pieces/bK.png\",\n};\n\nconst initialBoard: string[] = [\n  \"rnbqkbnr\",\n  \"pppppppp\",\n  \"........\",\n  \"........\",\n  \"........\",\n  \"........\",\n  \"PPPPPPPP\",\n  \"RNBQKBNR\",\n];\n\n// Hàm kiểm tra di chuyển hợp lệ\nfunction isValidMove(\n  piece: string,\n  r1: number,\n  c1: number,\n  r2: number,\n  c2: number,\n  board: string[][]\n): boolean {\n  const target = board[r2][c2];\n\n  // Không ăn quân cùng màu\n  if (piece === piece.toUpperCase() && target !== \".\" && target === target.toUpperCase()) return false;\n  if (piece === piece.toLowerCase() && target !== \".\" && target === target.toLowerCase()) return false;\n\n  switch (piece.toLowerCase()) {\n    case \"p\": // Tốt\n      if (piece === \"P\") return c1 === c2 && r2 === r1 - 1 && board[r2][c2] === \".\";\n      else return c1 === c2 && r2 === r1 + 1 && board[r2][c2] === \".\";\n    case \"r\": // Xe\n      if (r1 === r2) {\n        const min = Math.min(c1, c2) + 1;\n        const max = Math.max(c1, c2);\n        for (let c = min; c < max; c++) if (board[r1][c] !== \".\") return false;\n        return true;\n      } else if (c1 === c2) {\n        const min = Math.min(r1, r2) + 1;\n        const max = Math.max(r1, r2);\n        for (let r = min; r < max; r++) if (board[r][c1] !== \".\") return false;\n        return true;\n      }\n      return false;\n    case \"n\": // Mã\n      return (Math.abs(r2 - r1) === 2 && Math.abs(c2 - c1) === 1) ||\n             (Math.abs(r2 - r1) === 1 && Math.abs(c2 - c1) === 2);\n    case \"b\": // Tượng\n      if (Math.abs(r2 - r1) !== Math.abs(c2 - c1)) return false;\n      const dr = r2 > r1 ? 1 : -1;\n      const dc = c2 > c1 ? 1 : -1;\n      let r = r1 + dr, c = c1 + dc;\n      while (r !== r2 && c !== c2) {\n        if (board[r][c] !== \".\") return false;\n        r += dr;\n        c += dc;\n      }\n      return true;\n    case \"q\": // Hậu\n      return isValidMove(piece === \"Q\" ? \"R\" : \"r\", r1, c1, r2, c2, board) ||\n             isValidMove(piece === \"Q\" ? \"B\" : \"b\", r1, c1, r2, c2, board);\n    case \"k\": // Vua\n      return Math.abs(r2 - r1) <= 1 && Math.abs(c2 - c1) <= 1;\n    default:\n      return false;\n  }\n}\n\nconst Board: React.FC = () => {\n  const [board, setBoard] = useState<string[][]>(initialBoard.map(row => row.split(\"\")));\n  const [selected, setSelected] = useState<[number, number] | null>(null);\n\n  const handleClick = (r: number, c: number) => {\n    if (selected) {\n      const [r1, c1] = selected;\n      const piece = board[r1][c1];\n      if (!piece || piece === \".\") return setSelected(null);\n\n      if (isValidMove(piece, r1, c1, r, c, board)) {\n        const newBoard = board.map(row => [...row]);\n        newBoard[r1][c1] = \".\";\n        newBoard[r][c] = piece;\n        setBoard(newBoard);\n      }\n      setSelected(null); // bỏ chọn dù di chuyển thành công hay không\n    } else {\n      if (board[r][c] !== \".\") setSelected([r, c]);\n    }\n  };\n\n  return (\n    <div\n      style={{\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(8, 60px)\",\n        gridTemplateRows: \"repeat(8, 60px)\",\n        border: \"2px solid black\",\n      }}\n    >\n      {board.map((row, i) =>\n        row.map((piece, j) => {\n          const color = (i + j) % 2 === 0 ? \"#f0d9b5\" : \"#b58863\";\n          const piecePath = pieceImages[piece] || \"\";\n          const isSelected = selected?.[0] === i && selected?.[1] === j;\n          return (\n            <Square\n              key={`${i}-${j}`}\n              value={piecePath}\n              isSelected={isSelected}\n              onClick={() => handleClick(i, j)}\n              color={color}\n            />\n          );\n        })\n      )}\n    </div>\n  );\n};\n\nexport default Board;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}